var properties = {
  data: [
    {
      id: 1,
      title: "Real Luxury Villa",
      listing_for: "Sale",
      is_featured: true,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.541599,
      longitude: -0.112588,
      address: "123 Kathal St. Tampa City",
      area: 2,
      bathroom: 3,
      garage: 1,
      image: "img/properties/properties-1.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 2,
      title: "Park Avenue",
      listing_for: "Rent",
      is_featured: false,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.538395,
      longitude: -0.09741800000000001,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-2.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 3,
      title: "Park Avenue",
      listing_for: "Rent",
      is_featured: true,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.539212,
      longitude: -0.118403,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-3.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 4,
      title: "Big Head House",
      listing_for: "Sale",
      is_featured: true,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.52234,
      longitude: -0.037894,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-4.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 5,
      title: "Big Head House",
      listing_for: "Rent",
      is_featured: false,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.513965,
      longitude: -0.038837,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-5.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 6,
      title: "Modern Family Home",
      listing_for: "Sale",
      is_featured: false,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.503965,
      longitude: -0.058837,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-6.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 7,
      title: "Modern Family Home",
      listing_for: "Rent",
      is_featured: false,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.555385,
      longitude: -0.128274,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-1.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 8,
      title: "Relaxing Apartment",
      listing_for: "Sale",
      is_featured: false,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.560935,
      longitude: -0.111365,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-2.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 9,
      title: "Relaxing Apartment",
      listing_for: "Sale",
      is_featured: false,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.543803,
      longitude: -0.036607,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-3.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 10,
      title: "Modern Family Home",
      listing_for: "Sale",
      is_featured: false,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.527306,
      longitude: -0.140977,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-4.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 11,
      title: "Park Avenue",
      listing_for: "Sale",
      is_featured: false,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.558907,
      longitude: -0.041842,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-5.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 12,
      title: "Park Avenue",
      listing_for: "Sale",
      is_featured: true,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.550644,
      longitude: -0.103493,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-6.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 13,
      title: "Park Avenue",
      listing_for: "Sale",
      is_featured: false,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.532112,
      longitude: -0.051885,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-1.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 14,
      title: "Modern Family Home",
      listing_for: "Sale",
      is_featured: true,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.531311,
      longitude: -0.052314,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-2.jpg",
      type_icon: "img/building.png",
    },
    {
      id: 15,
      title: "Relaxing Apartment",
      listing_for: "Sale",
      is_featured: false,
      author: "Jhon Doe",
      date: "5 days ago",
      latitude: 51.530189,
      longitude: -0.07875,
      address: "123 Kathal St. Tampa City,",
      area: 2,
      room: 4,
      bathroom: 3,
      balcony: 3,
      lounge: 1,
      garage: 1,
      image: "img/properties/properties-3.jpg",
      type_icon: "img/building.png",
    },
  ],
};
function drawInfoWindow(i) {
  var g = "img/logo.png";
  if (i.image) {
    g = i.image;
  }
  var j = "N/A";
  if (i.title) {
    j = i.title;
  }
  var a = "";
  if (i.address) {
    a = i.address;
  }
  var b = 1000;
  if (i.area) {
    b = i.area;
  }
  var d = 5;
  if (i.bedroom) {
    d = i.bedroom;
  }
  var c = 5;
  if (i.bathroom) {
    c = i.bathroom;
  }
  var e = 1;
  if (i.garage) {
    e = i.garage;
  }
  var h = 253.33;
  if (i.price) {
    h = i.price;
  }
  var f = "";
  f =
    "<div class='map-properties'><div class='map-img'><img src='" +
    g +
    "'/><div class=\"price-ratings-box\">\n                                </div></div><div class='map-content'><h4><a href='car-details.html'>" +
    j +
    "</a></h4><p class='address'> <i class='flaticon-pin'></i>" +
    a +
    "</p><div class='map-properties-fetures'> <span><i class='flaticon-area'></i>  " +
    b +
    " sqft</span> <span><i class='flaticon-hotel'></i>  " +
    d +
    " Beds</span> <span><i class='flaticon-bathroom'></i>  " +
    c +
    " Baths</span> </div></div>";
  return f;
}
function insertPropertyToArray(p, l) {
  var j = "img/logo.png";
  if (p.image) {
    j = p.image;
  }
  var q = "N/A";
  if (p.title) {
    q = p.title;
  }
  var m = "Sale";
  if (p.listing_for) {
    m = p.listing_for;
  }
  var a = "";
  if (p.address) {
    a = p.address;
  }
  var b = 1000;
  if (p.area) {
    b = p.area;
  }
  var f = 5;
  if (p.bedroom) {
    f = p.bedroom;
  }
  var e = 5;
  if (p.bathroom) {
    e = p.bathroom;
  }
  var i = 1;
  if (p.garage) {
    i = p.garage;
  }
  var d = 1;
  if (p.balcony) {
    d = p.balcony;
  }
  var n = 1;
  if (p.lounge) {
    n = p.lounge;
  }
  var o = 253.33;
  if (p.price) {
    o = p.price;
  }
  var k = "";
  if (p.is_featured) {
    k = '<div class="tag">Featured</div> ';
  }
  var g = "";
  if (p.date) {
    g = p.date;
  }
  var c = "";
  if (p.author) {
    c = p.author;
  }
  var h = "";
  if (l == "grid_layout") {
    h =
      '<div class="col-lg-6 col-md-6 col-sm-12"><div class="car-box">\n                            <div class="car-thumbnail">\n                                <a href="car-details.html" class="car-img">\n                                     ' +
      k +
      '  \n                                    <div class="price-box"><span>$' +
      o +
      '</span> month</div>\n                                    <img class="d-block w-100" src="' +
      j +
      '" alt="properties">\n                                </a>\n                            </div>\n                            <div class="detail">\n                                <h1 class="title">\n                                    <a href="car-details.html">' +
      q +
      '</a>\n                                </h1>\n                                <div class="location">\n                                    <a href="car-details.html">\n                                        <i class="flaticon-pin"></i>' +
      a +
      '                                    </a>\n                                </div>\n                                <ul class="facilities-list clearfix">\n                                    <li>\n                                        <i class="flaticon-bed"></i> ' +
      f +
      ' Beds\n                                    </li>\n                                    <li>\n                                        <i class="flaticon-bathroom"></i> ' +
      e +
      ' Baths\n                                    </li>\n                                    <li>\n                                        <i class="flaticon-ui"></i> Sq Ft:' +
      b +
      '\n                                    </li>\n                                    <li>\n                                        <i class="flaticon-car"></i> ' +
      i +
      " Garage\n                                    </li>\n                                </ul>\n                            </div>\n                        </div></div>";
  } else {
    h =
      '<div class="car-box-2" >\n                    <div class="row">\n                        <div class="col-lg-5 col-md-5 col-pad">\n                            <div class="car-thumbnail">\n                                <a href="car-details.html" class="car-img">\n                                    <img src="' +
      j +
      '" alt="properties" class="img-fluid">\n                                    ' +
      k +
      '\n                                    <div class="price-box"><span>$' +
      o +
      '</span> month</div>\n                                </a>\n                            </div>\n                        </div>\n                        <div class="col-lg-7 col-md-7 col-pad align-self-center">\n                            <div class="detail">\n                                <h3 class="title">\n                                    <a href="car-details.html">' +
      q +
      '</a>\n                                </h3>\n                                <h5 class="location">\n                                    <a href="car-details.html">\n                                        <i class="flaticon-pin"></i>' +
      a +
      '                                    </a>\n                                </h5>\n                                <ul class="facilities-list clearfix">\n                                    <li>\n                                        <i class="flaticon-bed"></i> ' +
      f +
      ' Beds\n                                    </li>\n                                    <li>\n                                        <i class="flaticon-bathroom"></i> ' +
      e +
      ' Baths\n                                    </li>\n                                    <li>\n                                        <i class="flaticon-ui"></i> Sq Ft:' +
      b +
      '\n                                    </li>\n                                    <li>\n                                        <i class="flaticon-car"></i> ' +
      i +
      " Garage\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                </div>";
  }
  return h;
}
function animatedMarkers(c, f, d, b) {
  var a = c.getBounds();
  var e = [];
  $.each(f, function (g, h) {
    if (a.contains(f[g].getLatLng())) {
      e.push(insertPropertyToArray(d.data[g], b));
      setTimeout(function () {
        if (f[g]._icon != null) {
          f[g]._icon.className =
            "leaflet-marker-icon leaflet-zoom-animated leaflet-clickable bounce-animation marker-loaded";
        }
      }, g * 50);
    } else {
      if (f[g]._icon != null) {
        f[g]._icon.className =
          "leaflet-marker-icon leaflet-zoom-animated leaflet-clickable";
      }
    }
  });
  $(".fetching-properties").html(e);
}
function generateMap(a, c, e, b) {
  var d = L.map("map", { center: [a, c], zoom: 14, scrollWheelZoom: false });
  L.tileLayer.provider(e).addTo(d);
  var f = L.markerClusterGroup({
    showCoverageOnHover: false,
    zoomToBoundsOnClick: false,
  });
  var g = [];
  $.each(properties.data, function (k, n) {
    var j = '<img src="img/logos/black-logo.png">';
    if (n.type_icon) {
      j = '<img src="' + n.type_icon + '">';
    }
    var i = "";
    var m =
      '<div class="map-marker ' +
      i +
      '"><div class="icon">' +
      j +
      "</div></div>";
    var h = L.divIcon({
      html: m,
      iconSize: [36, 46],
      iconAnchor: [18, 32],
      popupAnchor: [130, -28],
      className: "",
    });
    var l = L.marker(new L.LatLng(n.latitude, n.longitude), {
      title: n.title,
      icon: h,
    });
    g.push(l);
    l.bindPopup(drawInfoWindow(n));
    f.addLayer(l);
    l.on("popupopen", function () {
      this._icon.className += " marker-active";
    });
    l.on("popupclose", function () {
      this._icon.className =
        "leaflet-marker-icon leaflet-zoom-animated leaflet-clickable marker-loaded";
    });
  });
  d.addLayer(f);
  animatedMarkers(d, g, properties, b);
  d.on("moveend", function () {
    animatedMarkers(d, g, properties, b);
  });
  $(".fetching-properties .car-box-2, .fetching-properties .car-box").hover(
    function () {
      g[$(this).attr("id") - 1]._icon.className =
        "leaflet-marker-icon leaflet-zoom-animated leaflet-clickable marker-loaded marker-active";
    },
    function () {
      g[$(this).attr("id") - 1]._icon.className =
        "leaflet-marker-icon leaflet-zoom-animated leaflet-clickable marker-loaded";
    }
  );
  $(".geolocation").on("click", function () {
    d.locate({ setView: true });
  });
  $("#map").removeClass("fade-map");
}
